<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Admin Dashboard | BullRunPro</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family:'Segoe UI', sans-serif;
        }

        body{
            background:#f4f4f4;
            transition:0.4s ease;
        }

        /* ===== HEADER ===== */
        header{
            position:sticky;
            top:0;
            z-index:1000;
            background:#000;
            color:white;
            padding:12px 20px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            flex-wrap:wrap;
            box-shadow:0 4px 15px rgba(0,0,0,0.4);
        }

        .logo-section{
            display:flex;
            align-items:center;
            gap:10px;
        }

        .logo{
            width:45px;
            height:45px;
            border-radius:50%;
            border:2px solid orange;
        }

        .top-buttons{
            display:flex;
            gap:10px;
            flex-wrap:wrap;
        }

        .top-buttons button,
        .top-buttons a{
            font-size:13px;
            padding:7px 14px;
            border-radius:25px;
            border:2px solid white;
            cursor:pointer;
            text-decoration:none;
            background:white;
            color:black;
            font-weight:bold;
            transition:0.3s;
        }

        .top-buttons button:hover,
        .top-buttons a:hover{
            background:orange;
            border-color:orange;
        }

        .admin-btn{
            background:orange !important;
            border-color:orange !important;
        }

        .dark-btn{
            background:black !important;
            color:white !important;
        }

        /* ===== CONTAINER ===== */
        .container{
            width:90%;
            max-width:1200px;
            margin:40px auto;
        }

        /* ===== STAT CARDS ===== */
        .dashboard-cards{
            display:flex;
            flex-wrap:wrap;
            gap:25px;
            justify-content:center;
            margin-bottom:40px;
        }

        .stat-card{
            background:white;
            width:260px;
            padding:30px;
            border-radius:15px;
            box-shadow:0 10px 25px rgba(0,0,0,0.08);
            transition:0.3s;
            text-align:center;
        }

        .stat-card:hover{
            transform:translateY(-8px);
        }

        .stat-card h3{
            color:#ff6600;
            margin-bottom:15px;
        }

        .stat-number{
            font-size:22px;
            font-weight:bold;
        }

        /* ===== TABLE ===== */
        .table-section{
            margin-top:30px;
        }

        .table-section h2{
            margin-bottom:15px;
        }

        table{
            width:100%;
            border-collapse:collapse;
            background:white;
            border-radius:10px;
            overflow:hidden;
        }

        thead{
            background:black;
            color:white;
        }

        th, td{
            padding:12px;
            text-align:center;
            border-bottom:1px solid #eee;
        }

        tbody tr:hover{
            background:#f2f2f2;
        }

        /* ===== DARK MODE ===== */
        .dark-mode{
            background:#121212;
            color:white;
        }

        .dark-mode .stat-card{
            background:#1e1e1e;
        }

        .dark-mode table{
            background:#1e1e1e;
            color:white;
        }

        .dark-mode thead{
            background:#ff6600;
        }

        /* ===== MOBILE ===== */
        @media(max-width:768px){
            .stat-card{
                width:100%;
            }

            table{
                font-size:13px;
            }
        }
    </style>
</head>

<body>

<header>
    <div class="logo-section">
        <img src="/images/img8.jpeg" class="logo">
        <h2 id="dashboardTitle">ADMIN DASHBOARD</h2>
    </div>

    <div class="top-buttons">
        <button onclick="switchLanguage('en')">EN</button>
        <button onclick="switchLanguage('mr')">मराठी</button>
        <button onclick="toggleDarkMode()" class="dark-btn">Dark</button>
        <a th:href="@{/}" >Home</a>
        <a th:href="@{/logout}" class="admin-btn">Logout</a>
    </div>
</header>

<div class="container">

    <!-- ===== STATISTICS ===== -->
    <div class="dashboard-cards">

        <div class="stat-card">
            <h3>Total Racers</h3>
            <div class="stat-number"
                 th:text="${totalRacers}">0</div>
        </div>

        <div class="stat-card">
            <h3>Total Groups</h3>

            <div class="stat-number"
                 th:if="${totalGroups > 0}"
                 th:text="${totalGroups}">
            </div>

            <div class="stat-number"
                 th:if="${totalGroups == 0}">
                Yet to be generated
            </div>
        </div>

        <div class="stat-card">
            <h3>Today's Registrations</h3>
            <div class="stat-number"
                 th:text="${#lists.size(todayRacers)}">0</div>
        </div>

    </div>

    <!-- ===== TODAY TABLE ===== -->
    <div class="table-section">

        <h2>Today's Registered Racers</h2>

        <div th:if="${#lists.isEmpty(todayRacers)}"
             style="padding:15px;background:white;border-radius:10px;">
            No registrations today.
        </div>

        <div th:if="${!#lists.isEmpty(todayRacers)}"
             style="overflow-x:auto;">

            <table>
                <thead>
                <tr>
                    <th>Registration No</th>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Village</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="racer : ${todayRacers}">
                    <td th:text="${racer.registrationNumber}"></td>
                    <td th:text="${racer.racerName}"></td>
                    <td th:text="${racer.phoneNumber}"></td>
                    <td th:text="${racer.village}"></td>
                </tr>
                </tbody>
            </table>

        </div>

    </div>

</div>

<script>

    /* DARK MODE SAVE */
    if(localStorage.getItem("darkMode") === "enabled"){
        document.body.classList.add("dark-mode");
    }

    function toggleDarkMode(){
        document.body.classList.toggle("dark-mode");
        if(document.body.classList.contains("dark-mode")){
            localStorage.setItem("darkMode","enabled");
        }else{
            localStorage.setItem("darkMode","disabled");
        }
    }

    /* LANGUAGE SWITCH */
    function switchLanguage(lang){
        localStorage.setItem("language", lang);

        if(lang === 'mr'){
            document.getElementById("dashboardTitle").innerText =
            "प्रशासक डॅशबोर्ड";
        } else {
            location.reload();
        }
    }

    if(localStorage.getItem("language") === "mr"){
        switchLanguage("mr");
    }

</script>

</body>
</html>